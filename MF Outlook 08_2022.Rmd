---
title: "MakroFin Pregled"
author: "Lux"
date: '2022-08-20'
output: html_document
---

```{r setup, include=FALSE, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```




## MAKROEKONOMSKI PREGLED


<details>
  <summary>Inflacija</summary>


```{r,fig.width=12, echo=FALSE, warning=FALSE, message=FALSE}
library(WDI)
library(ggplot2)
library(tidyverse)

dat = WDI(indicator='FP.CPI.TOTL.ZG',
          country=c('FR','GB','US','DE','IT','ES'),
          start=1960, end=2021)



ggplot(dat, aes(year, FP.CPI.TOTL.ZG, color=country)) +
  geom_line() + 
  xlab('Year') +
  ylab('CPI %')

```

```{r eval=FALSE, echo=FALSE , warning=FALSE, message=FALSE}

# see package tutorial at:
# https://github.com/mingjerli/IMFData
# also: https://meshry.com/blog/downloading-data-from-the-imf-api-using-r/

library(IMFData)
 

# search for data
availableDB <- DataflowMethod()
availableDB$DatabaseID#[127]
grep("rate",availableDB$DatabaseText)
availableDB$DatabaseText[grep(" Monetary and Financial Statistics",availableDB$DatabaseText)]
CPI.available.codes <- DataStructureMethod("MFS")
CodeSearch(CPI.available.codes, "CL_INDICATOR_CPI", "")


names(CPI.available.codes)
CPI.available.codes[[3]]


# API call

databaseID <- "CPI"
startdate = "2001-01-01"
enddate = "2022-12-31"
checkquery = FALSE

## Germany, Norminal GDP in Euros, Norminal GDP in National Currency
queryfilter <- list(CL_FREQ = "",
                    CL_AREA_CPI = "", #  c("US","DE","FR" )
                    CL_INDICATOR_CPI = "PCPIHA_PC_CP_A_PT") # PCPI_IX PCPIHA_PC_CP_A_PT
CPI.query <- CompactDataMethod(databaseID,
                               queryfilter,
                               startdate, enddate,
                               checkquery)
CPI.query[, 1:5]


CPI.query$Obs[[4]]


```

```{r,echo=FALSE,  fig.width=12,warning=FALSE, message=FALSE}
# from DBNomics
# check tutorial: https://macro.cepremap.fr/article/2020-10/rdbnomics-tutorial/
library(rdbnomics)


df <- rdb(ids = c('IMF/CPI/M.US.PCPI_PC_CP_A_PT',
                  'IMF/CPI/M.DE.PCPI_PC_CP_A_PT',
                  'IMF/CPI/M.GB.PCPI_PC_CP_A_PT',
                  'IMF/CPI/M.FR.PCPI_PC_CP_A_PT')) %>%
  filter(!is.na(value))


ggplot(df, aes(x = period, y = value, color = REF_AREA)) +
  geom_line(size = 0.5) 


```


</details>


<details>
 <summary>Kamatne stope CB</summary>
  

```{r, fig.width=10, echo=FALSE}
# Monetary and Financial Statistics (MFS) [MFS]

# https://db.nomics.world/IMF/MFS?dimensions=%7B%22INDICATOR%22%3A%5B%22FPOLM_PA%22%5D%2C%22REF_AREA%22%3A%5B%22US%22%2C%22U2%22%5D%7D&q=+Monetary+and+Financial+Statistics+


# df <- rdb(ids = c('IMF/MFS/M.US.FPOLM_PA',
#                   'IMF/MFS/M.U2.FPOLM_PA',
#                  # 'IMF/MFS/M.DE.FPOLM_PA',
#                   'IMF/MFS/M.GB.FPOLM_PA')) %>%
#   filter(!is.na(value))
# 
# 
# ggplot(df, aes(x = period, y = value, color = REF_AREA)) +
#   geom_line(size = 0.5) 


# BIS 

df <- rdb(ids = c('BIS/cbpol/D.US',
                  'BIS/cbpol/D.XM',
                 # 'IMF/MFS/M.DE.FPOLM_PA',
                  'BIS/cbpol/D.GB')) %>%
  filter(!is.na(value))


ggplot(df, aes(x = period, y = value, color = REF_AREA)) +
  geom_line(size = 0.5) 


```






</details>


<details>
 <summary>BDP dugoročno (razine)</summary>

```{r}


# dugoročne razine sa PEN world


df <- rdb(ids = c('OECD/MEI/USA.NAEXCP01.STSA.A',
                  'OECD/MEI/EA19.NAEXCP01.STSA.A',
                 # 'IMF/MFS/M.DE.FPOLM_PA',
                  'OECD/MEI/GBR.NAEXCP01.STSA.A')) %>%
  filter(!is.na(value))


ggplot(df, aes(x = period, y = value, color = Country)) +
  geom_line(size = 0.5) 




```


</details>


<details>
 <summary>BDP dugoročno (stope promjene)</summary>


```{r}


df <- rdb(ids = c('OECD/MEI/USA.NAEXKP01.GYSA.Q',
                  'OECD/MEI/EA19.NAEXKP01.GYSA.Q',
                 # 'IMF/MFS/M.DE.FPOLM_PA',
                  'OECD/MEI/GBR.NAEXKP01.GYSA.Q')) %>%
  filter(!is.na(value))


ggplot(df, aes(x = period, y = value, color = Country)) +
  geom_line(size = 0.5) 



df <- rdb(ids = c('OECD/MEI/USA.NAEXKP01.GYSA.A',
                  'OECD/MEI/EA19.NAEXKP01.GYSA.A',
                 # 'IMF/MFS/M.DE.FPOLM_PA',
                  'OECD/MEI/GBR.NAEXKP01.GYSA.A')) %>%
  filter(!is.na(value))


ggplot(df, aes(x = period, y = value, color = Country)) +
  geom_line(size = 0.5) 


```





</details>


<details>
 <summary>BDP dugoročno (recesije)</summary>


```{r}


```




```{r}

library(fredr)

fredr(
  series_id = "JHDUSRGDPBR",
  observation_start = as.Date("1940-01-01"),
  observation_end = as.Date("2022-01-01")
) %>%
ggplot(data = ., mapping = aes(x = date, y = value, color = series_id)) +
    geom_line() +
    labs(x = "Observation Date", y = "Rate", color = "Series") +
    ggtitle("Recesija u SAD")


```



```{r}

fredr(
  series_id = "JHGDPBRINDX",
  observation_start = as.Date("1940-01-01"),
  observation_end = as.Date("2022-01-01")
) %>%
ggplot(data = ., mapping = aes(x = date, y = value, color = series_id)) +
    geom_line() +
    labs(x = "Observation Date", y = "Rate", color = "Series") +
    ggtitle("Vjerojatnost recesije u SAD")

```





</details>

<details>
 <summary>BDP kratkoročno</summary>


<iframe src='https://d3fy651gv2fhd3.cloudfront.net/embed/?s=gdp+cqoq&v=202207281330V20220312&d1=20190821&h=300&w=600' height='300' width='600'  frameborder='0' scrolling='no'></iframe>

</details>


<details>
 <summary>Nezaposlenost</summary>

```{r}


fredr(
  series_id = "UNRATE",
  observation_start = as.Date("1940-01-01"),
  observation_end = as.Date("2022-01-01")
) %>% # View()
ggplot(data = ., mapping = aes(x = date, y = value)) +
    geom_line() + 
    geom_rect( aes(xmin=realtime_start, xmax=realtime_end, ymin=-Inf, ymax=+Inf), fill='pink', alpha=0.2) +
    labs(x = "Observation Date", y = "Rate", color = "Series") +
    ggtitle("Nezaposlenost u SAD")

```


</details>


<details>
 <summary>Nezaposlenost (+recesije)</summary>


```{r , echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/nezaposlenost1.png")
```

</details>

## FINANCIJSKA TRŽIŠTA


<details>
 <summary>Dionice (povijesno)</summary>

```{r , echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/stocksLT.png")
```

</details>



<details>
 <summary>Dionice (25y)</summary>


```{r , echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/stocks25y.png")
```

</details>


<details>
 <summary>Dionice (5y)</summary>


```{r , echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/stocks5y.png")
```

</details>

<details>
 <summary>Dionice (1y)</summary>


```{r , echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/stocks1y.png")
```

</details>

<details>
 <summary>Nafta (1y)</summary>


```{r , echo=FALSE, fig.cap="A caption", out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/oil.png")
```

</details>


<details>
 <summary>Obveznice (10y;dugi rok) </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/bonds10.png")
```

</details>



<details>
 <summary>Obveznice (10y;srednji rok) </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/bonds10st.png")
```

</details>


<details>
 <summary>Obveznice (1y;srednji rok) </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/bonds1.png")
```

</details>


<details>
 <summary>Obveznice inverzija </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/Inkedyield inversion.jpg")
```

</details>





<details>
 <summary>Bond spread</summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/bondspread.png")
```

</details>



<details>
 <summary>TLT20</summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/TLT20.png")
```

</details>


<details>
 <summary>Crypto </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/BTC.png")
```

</details>


<details>
 <summary>Crypto </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/NASDAQ.png")
```

</details>


<details>
 <summary>Fondovi (energija + obvezince) </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/Inkedfondovi.jpg")
```

</details>


<details>
 <summary>FED i tržišta </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/InkedFED.jpg")
```

</details>



<details>
 <summary>Duljina pada na dioničkom tržištu </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/Inkedstockrecesije.jpg")
```

</details>

<details>
 <summary>SP500 zarade </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/Inkedspzarade.jpg")
```

</details>



</details>

<details>
 <summary>Income + </summary>


```{r , echo=FALSE,  out.width = '100%'}
knitr::include_graphics("C:/Users/Lukas/OneDrive/Desktop/MFOverview/Inkedincomeplus.jpg")
```

</details>







